{"id":"09ir77fu","parent_id":null,"name":"Create theme system","description":"Create a theme system that can be configured by the user","priority":1,"completed":true,"result":"Implemented strict config-file theme infrastructure with three commits. Added layered AppConfig loading (defaults < file < env), strict TOML deserialization with unknown-key rejection, strongly typed theme enums, and fail-fast startup errors for invalid config path/content. Added theme resolver module with built-in presets (default, light, high-contrast), token-based style lookup, and deterministic preset+override merging. Rewired REPL rendering to use ThemeToken mapping while preserving existing color enablement precedence. Added README configuration docs for file path, schema, tokens, modifiers, and precedence.\n\nVerification:\n- cargo fmt --all\n- cargo clippy --all-targets --all-features -- -D warnings\n- cargo test -- --nocapture (90 unit tests + 1 e2e passed)\n\nCommits:\n- 678198c feat(config): add strict file-based app config\n- 24c2e8b feat(cli): add preset and token-based theme resolver\n- 7a4b107 docs(config): document theme file and token schema","metadata":null,"created_at":"2026-02-20T14:10:16.365Z","updated_at":"2026-02-20T14:53:47.660Z","started_at":"2026-02-20T14:53:47.658Z","completed_at":"2026-02-20T14:53:47.660Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"0tcs6roy","parent_id":null,"name":"Remove injected Python","description":"I'd love if we could remove the injected python code and keep all the introspection and execution in the rust code, to avoid polluting the context","priority":1,"completed":true,"result":"Implemented","metadata":null,"created_at":"2026-02-20T14:18:33.355Z","updated_at":"2026-02-20T21:51:25.908Z","started_at":"2026-02-20T21:51:25.907Z","completed_at":"2026-02-20T21:51:25.908Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"1h4gg4bf","parent_id":null,"name":"Refactor UI","description":"Refactor the TUI timeline infrastructure from line-oriented rendering to widget-oriented rendering so timeline entries can be composed as dedicated widgets.\\n\\nScope:\\n- Implement infrastructure changes (no major UX parity guarantees required).\\n- Keep current behavior functionally intact, but exact line-for-line visual parity is not required.\\n- Add or convert assistant thinking/progress into a dedicated timeline widget in this task.\\n- Include test coverage for the new infrastructure and widget path.\\n\\nRequirements:\\n- Separate timeline data model from rendering implementation so new widget types can be added with localized changes.\\n- Replace the current flatten-to-lines timeline path with composable widget rendering for timeline content.\\n- Ensure existing timeline entry categories (python input/output, assistant turn, system/error) still render correctly after refactor.\\n\\nAcceptance criteria:\\n1. Timeline uses widget-oriented rendering infrastructure instead of only flattened line rendering.\\n2. Assistant thinking/progress is represented via a dedicated widget path.\\n3. Existing timeline categories still display correctly after refactor.\\n4. Automated tests are added/updated to validate the infrastructure and mixed-entry rendering behavior.","priority":1,"completed":true,"result":"Refactored TUI timeline from inline line-flattening in repl.rs to a dedicated widget-oriented timeline module (src/cli/timeline.rs). Extracted timeline model (entries, assistant turn/events/state) and rendering into composable timeline widgets, including a dedicated assistant thinking/progress widget path. Rewired UiState to use Timeline methods for output/user input/assistant turn mutation. Migrated assistant timeline rendering tests into timeline module and added mixed-entry rendering coverage plus multiline split/order coverage. Verification: cargo fmt --all; cargo clippy --all-targets --all-features -- -D warnings; cargo test (97 unit + 1 e2e passing).","metadata":{"commit":{"sha":"e2fda5c","message":"test(cli): cover multiline timeline rendering","branch":"refactor-ui","timestamp":"2026-02-20T16:53:40.252Z"}},"created_at":"2026-02-20T14:16:14.223Z","updated_at":"2026-02-20T16:53:40.253Z","started_at":"2026-02-20T16:53:40.253Z","completed_at":"2026-02-20T16:53:40.253Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"1vc6b23b","parent_id":null,"name":"Improve testing infrastructure","description":"The current infrastructure for tests is too simple and works line-by-line. We need to be able to test the full-screen rendering, maybe with ui snapshots?","priority":1,"completed":false,"result":null,"metadata":null,"created_at":"2026-02-20T14:44:45.758Z","updated_at":"2026-02-20T14:44:45.758Z","started_at":null,"completed_at":null,"blockedBy":[],"blocks":[],"children":[]}
{"id":"67e5pvjx","parent_id":null,"name":"Fix inspect regressions from refactor","description":"Resolve three review regressions in src/python/interpreter.rs: (1) preserve remaining pre-existing SIGALRM/ITIMER_REAL time when restoring inspect timeout context, (2) classify generators before generic Iterator checks to keep inspect kind semantics stable, and (3) avoid sampling arbitrary iterables via try_iter fallback to preserve read-only/low-side-effect inspect behavior. Add/adjust tests to lock behavior. Acceptance: tests, fmt, and clippy pass; changes split into multiple logical commits.","priority":1,"completed":true,"result":"Fixed three inspect regressions in src/python/interpreter.rs: preserved remaining pre-existing ITIMER_REAL delay after inspect timeout wrapper, restored generator kind precedence over generic Iterator classification, and restricted sample payload iteration to known built-in container types to avoid invoking custom __iter__ side effects. Added regression tests for generator kind and custom iterable sampling safety, and tightened timer restoration test to assert remaining delay is reduced after inspect work. Verification: cargo fmt --all -- --check, cargo clippy --all-targets --all-features -- -D warnings, cargo test (99 unit + 1 e2e passing).","metadata":{"commit":{"sha":"0cf406b","message":"style(python): format inspect sampler branch","branch":"no-inj","timestamp":"2026-02-20T21:50:12.801Z"}},"created_at":"2026-02-20T21:47:18.962Z","updated_at":"2026-02-20T21:50:12.803Z","started_at":"2026-02-20T21:50:12.802Z","completed_at":"2026-02-20T21:50:12.803Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"799jgfdv","parent_id":null,"name":"Re-enable dotenv loading with narrowed env policy","description":"Follow-up change: restore .env file loading while preserving narrowed valid environment variables. Keep GEMINI_API_KEY as env/config (env precedence), keep GEMINI_MODEL and GEMINI_BASE_URL config/default-only. Update docs, message copy, and tests accordingly.","priority":1,"completed":true,"result":"Re-added dotenvy dependency and dotenv loading in AppConfig::load. Kept narrowed policy: only GEMINI_API_KEY read from environment; GEMINI_MODEL/GEMINI_BASE_URL remain config/default only and are ignored even if present in .env. Updated assistant missing-key message to mention shell/.env/config. Updated README precedence note for .env API key support. Restored .env.example with API key only and note that model/base URL are config-only. Verification: cargo fmt --all (pass), cargo clippy --locked --all-targets -- -D warnings (pass), cargo test (pass: 91 tests).","metadata":null,"created_at":"2026-02-20T15:29:40.125Z","updated_at":"2026-02-20T15:29:47.799Z","started_at":"2026-02-20T15:29:47.797Z","completed_at":"2026-02-20T15:29:47.799Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"9gzugz3h","parent_id":null,"name":"Startup code","description":"We should probably have a way to launch some code at the startup every time","priority":1,"completed":false,"result":null,"metadata":null,"created_at":"2026-02-20T14:18:06.827Z","updated_at":"2026-02-20T14:18:06.827Z","started_at":null,"completed_at":null,"blockedBy":[],"blocks":[],"children":[]}
{"id":"a04jpdrd","parent_id":null,"name":"Choose Python runtime","description":"We need a way to specify the python path and other similar things","priority":1,"completed":false,"result":null,"metadata":null,"created_at":"2026-02-20T14:17:46.887Z","updated_at":"2026-02-20T14:17:46.887Z","started_at":null,"completed_at":null,"blockedBy":[],"blocks":[],"children":[]}
{"id":"a3aqaxmu","parent_id":"wceg3z4p","name":"Refactor runtime execution paths","description":"Replace helper-based exec/eval/run_user_input/check_input_completeness/list_globals/get_last_exception with rust implementations while preserving semantics and outputs.","priority":1,"completed":true,"result":"Implemented rust-native execution paths in PythonSession: removed helper-dispatch dependency, added direct compile/eval/exec flow, stdout/stderr capture via sys/io, source registration via linecache, Rust-managed last_exception and source counter, and direct list_globals/check_input_completeness/run_user_input wiring. Verified with cargo fmt --all, cargo clippy --all-targets --all-features -- -D warnings, cargo test (93 unit + 1 e2e passing).","metadata":null,"created_at":"2026-02-20T20:55:54.460Z","updated_at":"2026-02-20T21:01:41.409Z","started_at":"2026-02-20T21:01:41.409Z","completed_at":"2026-02-20T21:01:41.409Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"efz3u0yx","parent_id":null,"name":"Add session trace logging with XDG state file","description":"Implement always-on per-session trace logging for PyAIChat. Requirements: create one trace file per session in XDG state dir (/pyaichat/traces, fallback ~/.local/state/pyaichat/traces); include both input and output transcript events; include full raw HTTP request/response traces; print trace file name in session exit message. Keep existing --verbose stderr HTTP debug behavior unchanged. Implement with shared trace writer accessible from REPL and HTTP client, add path resolution + file creation at startup, update exit message/tests, add unit tests for path resolution and logging behavior. Verification: cargo fmt, cargo clippy --all-targets -- -D warnings, cargo test.","priority":1,"completed":true,"result":"Implemented always-on session trace logging with XDG state directory resolution and per-session file creation. Added new trace module with XDG_STATE_HOME/home fallback resolution, trace file lifecycle, transcript logging APIs, and path resolution tests. Wired trace into startup and REPL app state; session exit message now prints trace file name. Logged Python and assistant submitted inputs, Python stdout/stderr/value/traceback, assistant progress/result/error outputs to trace transcript. Extended HTTP client to write full raw request/response trace (including headers and bodies) and transport errors to the same trace sink while preserving existing --verbose redacted stderr behavior. Added HTTP client test asserting unredacted secret values are present in trace output and updated REPL tests for new exit message + output kind mapping. Verification: cargo fmt; cargo clippy --all-targets -- -D warnings; cargo test; cargo test -q (post-commit) all passed.","metadata":{"commit":{"sha":"ffed9b4","message":"feat(http): write full raw http trace to session log","branch":"logging","timestamp":"2026-02-20T20:26:17.970Z"}},"created_at":"2026-02-20T20:22:43.345Z","updated_at":"2026-02-20T20:26:17.972Z","started_at":"2026-02-20T20:26:17.971Z","completed_at":"2026-02-20T20:26:17.972Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"g5by8fd7","parent_id":null,"name":"Remove dotenv and narrow env config","description":"Implement agreed config simplification: remove .env loading; keep GEMINI_API_KEY configurable via env and config with env precedence; move GEMINI_MODEL and GEMINI_BASE_URL to config/defaults only; update messaging, tests, and docs; remove dotenv dependency and stale .env example.","priority":1,"completed":true,"result":"Removed dotenv-based .env loading from config initialization and removed dotenvy dependency from Cargo.toml. Updated AppConfig resolution so GEMINI_API_KEY remains env-over-config while GEMINI_MODEL and GEMINI_BASE_URL are config/default-only. Updated assistant missing-key message to remove .env guidance. Updated config tests: renamed env override test to API-key-specific behavior, asserted model/base-url env vars are ignored, and replaced dotenv override test with explicit .env-is-ignored test. Updated README precedence section to reflect new behavior. Removed .env.example. Verification evidence: cargo fmt --all (pass), cargo clippy --all-targets -- -D warnings (pass), cargo test (pass: 91 tests total).","metadata":null,"created_at":"2026-02-20T15:25:14.767Z","updated_at":"2026-02-20T15:26:29.700Z","started_at":"2026-02-20T15:26:29.699Z","completed_at":"2026-02-20T15:26:29.700Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"juryqiud","parent_id":null,"name":"Logging","description":"We should log all the http request/response, like we do with the verbose flag, to a file somewhere","priority":1,"completed":true,"result":"Completed","metadata":null,"created_at":"2026-02-20T14:14:39.497Z","updated_at":"2026-02-20T20:42:54.546Z","started_at":"2026-02-20T20:42:54.544Z","completed_at":"2026-02-20T20:42:54.546Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"o0qks93r","parent_id":null,"name":"Multiple LLM providers","description":"","priority":1,"completed":false,"result":null,"metadata":null,"created_at":"2026-02-20T15:24:26.316Z","updated_at":"2026-02-20T15:24:26.316Z","started_at":null,"completed_at":null,"blockedBy":[],"blocks":[],"children":[]}
{"id":"phxojwyh","parent_id":null,"name":"CLI flag for config file","description":"allow passing a cli flag to load config from another file. this will go _overriding_ the default one","priority":1,"completed":true,"result":"Added a CLI config file override via `--config <PATH>` that bypasses default XDG/home discovery and loads only the explicit file. Explicit paths now fail fast when missing or not a regular file, while default behavior remains unchanged when the flag is omitted.\n\nUpdated startup wiring to pass the optional CLI path into config loading and kept existing precedence rules (GEMINI_API_KEY env override, model/base URL from config defaults).\n\nAdded tests for CLI parsing and config loader behavior (explicit override wins over discovered file; explicit missing file errors). Updated help/e2e assertions and README docs to describe the new flag and path selection behavior.\n\nVerification:\n- cargo fmt --all\n- cargo clippy --all-targets --all-features -- -D warnings\n- cargo test (re-ran after one unrelated transient test failure; final run passed)\n\nCommits:\n- 586d5eb feat(config): add --config file override\n- fa63606 docs(cli): document config override flag","metadata":{"commit":{"sha":"586d5eb","message":"feat(config): add --config file override","branch":"main","timestamp":"2026-02-20T16:45:28.131Z"}},"created_at":"2026-02-20T15:24:15.570Z","updated_at":"2026-02-20T16:45:28.133Z","started_at":"2026-02-20T16:45:28.132Z","completed_at":"2026-02-20T16:45:28.133Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"q7be2dwe","parent_id":"wceg3z4p","name":"Migrate tests and remove helper file","description":"Update tests that monkeypatch helper functions, delete runtime_helpers.py, remove dead code paths, and run verification suite.","priority":1,"completed":true,"result":"Implemented rust-native inspect payload assembly and finalized cleanup: removed src/python/runtime_helpers.py, updated interpreter tests to remove helper-monkeypatch-specific coverage, and preserved behavioral tests for inspect/globals/eval/exec/exceptions. Verification: cargo fmt --all, cargo clippy --all-targets --all-features -- -D warnings, cargo test (93 unit + 1 e2e passing).","metadata":null,"created_at":"2026-02-20T20:55:54.445Z","updated_at":"2026-02-20T21:01:51.763Z","started_at":"2026-02-20T21:01:51.761Z","completed_at":"2026-02-20T21:01:51.763Z","blockedBy":[],"blocks":[],"children":[]}
{"id":"rsfcle95","parent_id":null,"name":"Eval python file","description":"We should have a way to run files, say a /include command. But maybe the command abstraction is a good idea?","priority":1,"completed":false,"result":null,"metadata":null,"created_at":"2026-02-20T14:15:15.652Z","updated_at":"2026-02-20T14:15:15.652Z","started_at":null,"completed_at":null,"blockedBy":[],"blocks":[],"children":[]}
{"id":"wceg3z4p","parent_id":null,"name":"Replace python helper injection with rust runtime","description":"Implement rust-native execution, eval, inspect, completeness, and globals logic in PythonSession so runtime_helpers.py is no longer injected. Preserve behavior parity and tests. Split work across runtime plumbing, inspect parity, tests, and cleanup. Verify with cargo fmt, clippy -D warnings, and cargo test.","priority":1,"completed":true,"result":"Replaced injected python runtime helpers with Rust implementations in PythonSession. Removed helper installation and helper dispatch, added Rust-managed execution/eval/completeness/globals/last_exception paths, built inspect payloads natively via PyO3 + stdlib APIs, and deleted src/python/runtime_helpers.py. Updated tests to align with rust-native paths. Verification completed: cargo fmt --all, cargo clippy --all-targets --all-features -- -D warnings, cargo test (93 unit + 1 e2e passing).","metadata":null,"created_at":"2026-02-20T20:55:50.067Z","updated_at":"2026-02-20T21:01:55.593Z","started_at":"2026-02-20T21:01:55.592Z","completed_at":"2026-02-20T21:01:55.593Z","blockedBy":[],"blocks":[],"children":["q7be2dwe","a3aqaxmu"]}
{"id":"wuzj7nt2","parent_id":null,"name":"Cleanup mvp files","description":"","priority":1,"completed":false,"result":null,"metadata":null,"created_at":"2026-02-20T14:15:28.807Z","updated_at":"2026-02-20T14:15:28.807Z","started_at":null,"completed_at":null,"blockedBy":[],"blocks":[],"children":[]}
